# Default values for linode-cosi-driver.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Number of pod replicas.
replicaCount: 1

# -- Linode API token. This field is **required** unless secret is created before deployment (see `secret.ref` value).
apiToken: ""

# -- Linode API URL, leave empty for default.
linodeApiUrl: ""

# -- Linode API version, leave empty for default.
linodeApiVersion: ""

driver:
  image:
    # -- Driver container image repository.
    repository: docker.io/linode/linode-cosi-driver

    # -- Driver container image pull policy.
    pullPolicy: IfNotPresent

    # -- Overrides the image tag whose default is the chart appVersion.
    tag: ""

  # -- OpenTelemetry configuration. All values defined here conform to the OTEL specification, and are not strictly defined in the Chart values.
  otelConfig: {}
    # OTEL_EXPORTER_OTLP_ENDPOINT: "http://localhost:4317"
    # OTEL_EXPORTER_OTLP_TIMEOUT: 10000
    # OTEL_EXPORTER_OTLP_PROTOCOL: "grpc"

sidecar:
  image:
    # -- Sidecar container image repository.
    repository: gcr.io/k8s-staging-sig-storage/objectstorage-sidecar/objectstorage-sidecar

    # -- Sidecar container image pull policy.
    pullPolicy: IfNotPresent

    # -- Sidecar container image tag.
    tag: "v20221117-v0.1.0-22-g0e67387"

  # -- Log verbosity level for the sidecar container.
  logVerbosity: 4

otelExporter:
  deploySidecar: false

  image:
    # -- OTEL agent container image repository.
    repository: docker.io/otel/opentelemetry-collector

    # -- OTEL agent container image tag.
    tag: "0.91.0"

    # -- OTEL agent container image pull policy.
    pullPolicy: IfNotPresent

  configMap:
    # -- Name of existing config map. It is required if deploySidecar is true.
    ref: ""

    # -- Data key in config map under which agent configuration is located.
    key: "agent.yaml"

# -- List of Docker registry secret names to pull images.
imagePullSecrets: []

# -- Overrides the chart name.
nameOverride: ""

# -- Overrides the full chart name.
fullnameOverride: ""

rbac:
  # -- Annotations to add to the service account, cluster role, and cluster role binding.
  annotations: {}

  # -- The name of the service account, cluster role, and cluster role binding to use.
  # If not set, a name is generated using the fullname template.
  name: ""

secret:
  # -- Name of existing secret. If not set, a new secret is created.
  ref: ""

  # -- Annotations to add to the secret.
  annotations: {}

podSecurityContext:
  # -- Run the pod as a non-root user.
  runAsNonRoot: true

  # -- User ID to run the pod as.
  runAsUser: 65532

securityContext:
  # -- Container runs with a read-only root filesystem.
  readOnlyRootFilesystem: true

# -- Annotations to add to the pod.
podAnnotations: {}
  # prometheus.io/scrape: 'true'
  # prometheus.io/path: '/metrics'
  # prometheus.io/port: '8080'

# -- Specify CPU and memory resource limits if needed.
# The value defined for CPU limits affects the number of threads used in the driver.
# The number of CPU seconds allocated above 1 is rounded using floor operation, so it should be done in integer steps (e.g. from 1 to 2).
# This means that assigning CPU limit of 1.5 will result in only one CPU being used at a time.
resources: {}
  # limits:
  #   cpu: 2
  #   memory: 256Mi
  # requests:
  #   cpu: 100m
  #   memory: 256Mi

# -- Node labels for pod assignment.
nodeSelector: {}

# -- Tolerations for pod assignment.
tolerations: []

# -- Node affinity rules for pod assignment.
affinity: {}
